# Подзадание 1.1: Анализ и планирование

[c4_context.puml](c4_context.puml)

## Функциональность монолитного приложения:

* Управление отоплением:
  * Пользователи могут удалённо включать/выключать отопление в своих домах.
  * Пользователи могут устанавливать желаемую температуру.
  * Система автоматически поддерживает заданную температуру, регулируя подачу тепла.
* Мониторинг температуры:
  * Система получает данные о температуре с датчиков, установленных в домах.
  * Пользователи могут просматривать текущую температуру в своих домах через веб-интерфейс.

## Архитектура монолитного приложения:
* Язык программирования: Java
* База данных: PostgreSQL
* Архитектура: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.
* Взаимодействие: Синхронное, запросы обрабатываются последовательно.
* Масштабируемость: Ограничена, так как монолит сложно масштабировать по частям.
* Развертывание: Требует остановки всего приложения.

## Домены и границы контекстов:

* Домен: управление устройствами
  * Контекст: включение\выключение устройства
  * Контекст: установка необходых параметров устройства
* Домен: мониторинг параметров
  * Контекст: получение данных с датчиков
  * Контекст: предоставление данных о текущих параметрах датчиков
 
## Плюсы текущего решения
* ТСО монолита ниже чем у микросервесной инфраструктуры
* Требуется меньше DevOps ресурсов на обслуживание и построение build pipiline
* Проще построить механизм трассировки событий

## Минусы текущего решения
* Невозможно масштабировать отдельные элементы системы, масштабироваться должен весь монолит
* При горизонтальном масштабировании монолита требуется организовать общий кэш, устройство которого для монолита сложнее чем для отдельно взятого микросервиса
* Сильная связанность бизнес логики в коде
* Внесение любых изменений в код требует:
  * Регрешен тестирование всего функционала
  * Ре-деплой всего приложения
  * В случае критических ошибок будет недоступено все приложение, а не отдельные его части как в случае с микросервисами 

## Подзадание 1.2: Архитектура микросервисов

C4 — Уровень контейнеров (Containers) [c4_container.puml](c4_container.puml)

C4 — Уровень компонентов (Components) [c4_component.puml](c4_component.puml) на примере контейнера "Управление устройствами"

C4 — Уровень кода (Code) [c4_code.puml](c4_code.puml) на примере контейнера "Устройства"

## Подзадание 1.3: ER-диаграмма

[er.puml](er.puml)

## Подзадание 1.4: Создание и документирование API

# Управление устройствами

OpenAPI: [device.open-api.yaml](device.open-api.yaml)

AsyncAPI: [device.async-api.yaml](device.async-api.yaml)

# Телеметрия

OpenAPI: [telemetry.open-api.yaml](telemetry.open-api.yaml)

AsyncAPI: [telemetry.async-api.yaml](telemetry.async-api.yaml)
